<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="3" author="MinenkoVS">
        <sqlFile dbms="mysql"
                 encoding="UTF-8"
                 endDelimiter="\nGO"
                 relativeToChangelogFile="true"
                 splitStatements="true"
                 stripComments="true"
                 path="20-create-post_comments-table.sql"/>

        <createTable tableName="post_comments">
            <column name="id" type="int" autoIncrement="true" >
                <constraints nullable ="false" primaryKey = "true"/>
            </column>
            <column name="text" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="timestamp" type="DATETIME(6)">
                <constraints nullable="false"/>
            </column>
            <column name="parent_id" type="int">
            </column>
            <column name="post_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>
<sql>
    INSERT INTO test.post_comments (id, text, timestamp, parent_id, post_id, user_id) VALUES
    (1, 'Нынче никто не может себе позволить инициировать звон колоколов', '2020-01-17 06:28:12.000000', NULL, 6, 1),
    (2, 'Окрестности Тулы оросил боевой клич героев', '2020-01-11 16:55:17.000000', NULL, 23, 10),
    (3, 'Цена вопроса не важна, когда средства индивидуальной защиты оказались бесполезны', '2020-01-10 21:55:09.000000', NULL, 4, 1),
    (4, 'Только зима близко', '2019-12-25 17:24:00.000000', NULL, 26, 7),
    (5, 'Консультация с широким активом ни к чему нас не обязывает', '2020-01-09 19:21:28.000000', NULL, 25, 2),
    (6, 'Нынче никто не может себе позволить инициировать старческий скрип Амстердама', '2019-12-25 17:33:00.000000', NULL, 26, 4),
    (7, 'Современная методология разработки продолжает удивлять', '2019-12-18 06:05:25.000000', NULL, 40, 9),
    (8, 'Не следует забывать, что небо темнеет', '2020-01-27 13:11:00.000000', NULL, 17, 9),
    (9, 'Доблесть наших правозащитников продолжает удивлять', '2020-01-17 21:42:36.000000', NULL, 37, 3),
    (10, 'На двадцатом съезде партии прозвучало поразительное заявление: граница обучения кадров разочаровала', '2019-12-12 18:14:08.000000', NULL, 36, 6),
    (11, 'Нынче никто не может себе позволить инициировать звон колоколов', '2020-01-14 04:29:36.000000', NULL, 38, 5),
    (12, 'Кровь стынет в жилах', '2020-01-03 04:10:09.000000', NULL, 20, 8),
    (13, 'Смешно, но потускнели светлые лики икон', '2020-01-06 15:42:47.000000', NULL, 12, 8),
    (14, 'Воистину радостный звук: гитарный перебор', '2019-12-04 16:54:22.000000', NULL, 10, 3),
    (15, 'Консультация с широким активом разочаровала', '2020-01-06 15:35:47.000000', NULL, 12, 4)
</sql>

        <rollback>
            <sqlFile dbms="mysql"
                     encoding="UTF-8"
                     endDelimiter="\nGO"
                     relativeToChangelogFile="true"
                     splitStatements="true"
                     stripComments="true"
                     path="20-drop-post_comments-table.sql"/>
        </rollback>
    </changeSet>
</databaseChangeLog>